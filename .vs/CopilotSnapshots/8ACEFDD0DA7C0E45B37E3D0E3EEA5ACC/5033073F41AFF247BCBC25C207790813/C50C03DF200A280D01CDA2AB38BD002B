from django import forms
from crispy_forms.helper import FormHelper
from crispy_forms.layout import Layout, Submit, Row, Column, HTML, Div
from .models import FeedbackResponse, Trainer, TrainingSession

class FeedbackForm(forms.ModelForm):
    RATING_CHOICES = [
        (5, '5 - Strongly Agree'),
        (4, '4 - Agree'),
        (3, '3 - Neutral'),
        (2, '2 - Disagree'),
        (1, '1 - Strongly Disagree'),
    ]

    rating_1 = forms.ChoiceField(
        choices=RATING_CHOICES,
        widget=forms.RadioSelect,
        label="1. The training met my expectations"
    )
    rating_2 = forms.ChoiceField(
        choices=RATING_CHOICES,
        widget=forms.RadioSelect,
        label="2. I will be able to apply the knowledge learned"
    )
    rating_3 = forms.ChoiceField(
        choices=RATING_CHOICES,
        widget=forms.RadioSelect,
        label="3. The content was organized and easy to follow"
    )
    rating_4 = forms.ChoiceField(
        choices=RATING_CHOICES,
        widget=forms.RadioSelect,
        label="4. The trainer was knowledgeable"
    )
    rating_5 = forms.ChoiceField(
        choices=RATING_CHOICES,
        widget=forms.RadioSelect,
        label="5. Training was relevant to my needs"
    )
    rating_6 = forms.ChoiceField(
        choices=RATING_CHOICES,
        widget=forms.RadioSelect,
        label="6. Instructions were clear and understandable"
    )
    rating_7 = forms.ChoiceField(
        choices=RATING_CHOICES,
        widget=forms.RadioSelect,
        label="7. Length and timing of training was sufficient"
    )
    rating_8 = forms.ChoiceField(
        choices=RATING_CHOICES,
        widget=forms.RadioSelect,
        label="8. Overall, the session was very good"
    )

    class Meta:
        model = FeedbackResponse
        fields = [
            'participant_name', 'rating_1', 'rating_2', 'rating_3', 'rating_4',
            'rating_5', 'rating_6', 'rating_7', 'rating_8', 'key_learnings', 'missing_elements'
        ]
        widgets = {
            'participant_name': forms.TextInput(attrs={'placeholder': 'Enter your name (optional)', 'class': 'form-control'}),
            'key_learnings': forms.Textarea(attrs={
                'rows': 4, 
                'placeholder': 'Please list the main things you learned during this session...',
                'class': 'form-control'
            }),
            'missing_elements': forms.Textarea(attrs={
                'rows': 3, 
                'placeholder': 'Please share what you think could have been improved or added...',
                'class': 'form-control'
            }),
        }

class TrainerForm(forms.ModelForm):
    class Meta:
        model = Trainer
        fields = ['name', 'email', 'phone', 'specialization', 'is_active']
        widgets = {
            'name': forms.TextInput(attrs={'placeholder': 'Enter trainer name', 'class': 'form-control'}),
            'email': forms.EmailInput(attrs={'placeholder': 'trainer@example.com', 'class': 'form-control'}),
            'phone': forms.TextInput(attrs={'placeholder': '+977-XXXXXXXXXX', 'class': 'form-control'}),
            'specialization': forms.TextInput(attrs={'placeholder': 'Digital Marketing, Communication Skills, etc.', 'class': 'form-control'}),
            'is_active': forms.CheckboxInput(attrs={'class': 'form-check-input'}),
        }

class TrainingSessionForm(forms.ModelForm):
    class Meta:
        model = TrainingSession
        fields = ['session_title', 'trainer', 'date', 'location', 'duration_hours', 'max_participants']
        widgets = {
            'date': forms.DateInput(attrs={'type': 'date', 'class': 'form-control'}),
            'session_title': forms.TextInput(attrs={'placeholder': 'Digital Marketing Fundamentals', 'class': 'form-control'}),
            'location': forms.TextInput(attrs={'placeholder': 'Kshitiz International College', 'class': 'form-control'}),
            'trainer': forms.Select(attrs={'class': 'form-control'}),
            'duration_hours': forms.NumberInput(attrs={'class': 'form-control', 'step': '0.5', 'min': '0.5'}),
            'max_participants': forms.NumberInput(attrs={'class': 'form-control', 'min': '1'}),
        }

class FeedbackImageUploadForm(forms.Form):
    session = forms.ModelChoiceField(queryset=TrainingSession.objects.all(), label="Session")
    image = forms.ImageField(label="Upload Feedback Image")
